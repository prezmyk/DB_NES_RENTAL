<?xml version = '1.0' encoding = 'UTF-8'?>
<PackageOracle class="oracle.dbtools.crest.model.design.storage.oracle.PackageOracle" name="game_cart_pkg" directorySegmentName="seg_0" id="DE31BCB7-628A-DBE7-9C3A-5CAE509C9A61">
<createdBy>PzK</createdBy>
<createdTime>2022-07-21 15:35:49 UTC</createdTime>
<ownerDesignName>nes_rental_shop</ownerDesignName>
<source>CREATE OR REPLACE PACKAGE game_cart_pkg IS

   TYPE game_array IS TABLE OF INTEGER INDEX BY BINARY_INTEGER;

   PROCEDURE add_games_to_cartridge ( p_game_id game_array, p_price NUMBER,
                                    p_title VARCHAR2 DEFAULT NULL, p_color VARCHAR2 DEFAULT NULL );   
    v_id NUMBER;
END game_cart_pkg;
/
CREATE OR REPLACE PACKAGE BODY game_cart_pkg IS  

    PROCEDURE add_games_to_cartridge ( p_game_id game_array, p_price NUMBER,
                                    p_title VARCHAR2 DEFAULT NULL, p_color VARCHAR2 DEFAULT NULL) AS
        BEGIN
            INSERT INTO cartridges ( price, title, color) 
                         VALUES ( p_price, p_title, p_color);

            v_id := SYS_seq.currval; -- CARTRIGES TABLE CARTRIGE_ID SEQUENCE TO IDENTITY COLUMN GENERATED BY SYSTEM
            FOR i IN p_game_id.first .. p_game_id.last
            LOOP
                INSERT INTO games_cartridges(game_id, cartridge_id)
                           VALUES (p_game_id(i), v_id);            
            END LOOP;        
        END;
/* 
DECLARE
  game_array game_cart_pkg.game_array;
BEGIN
  -- Game_id to cartridge
  game_array(0) := &apos;18&apos;;
  game_array(1) := &apos;12&apos;;  
  game_array(2) := &apos;15&apos;;
  game_cart_pkg.add_games_to_cartridge(game_array, 5, &apos;Czerwony&apos;); -- rests of cartridge details
*/
END game_cart_pkg;</source>
</PackageOracle>